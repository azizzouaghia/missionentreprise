<div class="w-full max-w-5xl flex rounded-2xl shadow-2xl overflow-hidden">

  <div class="hidden md:flex md:w-1/2 branding-panel text-white p-12 flex-col justify-between">
    <div>
      <h1 class="text-4xl font-bold">Join GitProject</h1>
      <p class="mt-4 text-red-100 text-lg">Create an account to start managing your projects with unparalleled efficiency and collaboration.</p>
    </div>
    <div class="text-red-200 text-sm">
      &copy; 2025 GitProject. All Rights Reserved.
    </div>
  </div>

  <div class="w-full md:w-1/2 bg-white p-8 sm:p-12">
    <h2 class="text-3xl font-bold text-gray-900 mb-2">Create an Account</h2>
    <p class="text-gray-600 mb-8">Let's get you started.</p>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <mat-stepper orientation="vertical" [linear]="true" #stepper>

        <mat-step [stepControl]="credentialsForm" label="Your Credentials">
          <ng-template matStepLabel>Your Credentials</ng-template>
          <div [formGroup]="credentialsForm" class="flex flex-col gap-4 py-4">
            <mat-form-field appearance="outline">
              <mat-label>Username</mat-label>
              <mat-icon matPrefix class="text-gray-400">person</mat-icon>
              <input matInput formControlName="username">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Email</mat-label>
              <mat-icon matPrefix class="text-gray-400">alternate_email</mat-icon>
              <input matInput formControlName="email" type="email">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Password</mat-label>
              <mat-icon matPrefix class="text-gray-400">lock</mat-icon>
              <input matInput formControlName="password" type="password">
            </mat-form-field>
          </div>
          <div class="pt-4">
            <button mat-flat-button color="primary" matStepperNext>Next</button>
          </div>
        </mat-step>

        <mat-step [stepControl]="roleInfoForm" label="Your Role">
          <ng-template matStepLabel>Your Role</ng-template>
          <div [formGroup]="roleInfoForm" class="py-4">
            <mat-form-field appearance="outline" class="w-full">
                <mat-label>Select your role</mat-label>
                <mat-select formControlName="role">
                  <mat-option value="ETUDIANT">Student</mat-option>
                  <mat-option value="PROF">Professor</mat-option>
                  <mat-option value="ADMIN">Admin</mat-option>
                </mat-select>
                <mat-icon matPrefix class="text-gray-400">work</mat-icon>
              </mat-form-field>
          </div>
           <div class="pt-4 flex gap-4">
            <button mat-button matStepperPrevious>Back</button>
            <button mat-flat-button color="primary" matStepperNext>Next</button>
          </div>
        </mat-step>

        <mat-step label="Final Details">
            <ng-template matStepLabel>Final Details</ng-template>
            <div [formGroup]="detailsForm" class="flex flex-col gap-4 py-4">
                <ng-container *ngIf="role === 'ETUDIANT'">
                    <mat-form-field appearance="outline">
                        <mat-label>Matricule</mat-label>
                        <input matInput formControlName="matricule">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Niveau</mat-label>
                        <input matInput formControlName="niveau">
                    </mat-form-field>
                </ng-container>
                <ng-container *ngIf="role === 'PROF'">
                    <mat-form-field appearance="outline">
                        <mat-label>Specialty</mat-label>
                        <input matInput formControlName="specialite">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Office</mat-label>
                        <input matInput formControlName="bureau">
                    </mat-form-field>
                </ng-container>
                <ng-container *ngIf="role === 'ADMIN'">
                    <p class="text-gray-600 p-4 bg-gray-50 rounded-md">No additional details required for Admins.</p>
                </ng-container>
            </div>
             <div class="pt-4 flex gap-4">
                <button mat-button matStepperPrevious>Back</button>
                <button mat-flat-button color="primary" type="submit" [disabled]="!registerForm.valid">Create Account</button>
            </div>
        </mat-step>

      </mat-stepper>
    </form>

    <p class="mt-8 text-center text-sm text-gray-600">
      Already have an account? 
      <a routerLink="/auth/login" class="font-semibold text-red-600 hover:text-red-500">Sign In</a>
    </p>

  </div>
</div>